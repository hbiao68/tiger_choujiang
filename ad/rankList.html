
<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<link rel="stylesheet" href="../public/css/bootstrap.min.css">
	<link rel="stylesheet" href="../public/css/swiper.min.css">
	<link rel="stylesheet" href="../public/css/hb_wap.css">
	<title>排行榜</title>
	<style>

	</style>
</head>
<body class="margin_0">

<div class="nav_header color_e5005a bg_fdd000">
	<div class="nav_header_left">
		<a href="https://www.baidu.com">
			<span class="icon iconfont color_e5005a">&#xE60C;</span>
		</a>
	</div>
	小小“惠”画家
	<!--<div class="nav_header_right">-->
	<!--<a href="https://www.baidu.com" class="btn btn-primary">确定</a>-->
	<!--</div>-->
</div>

<style>
	table tr td{
		padding:2px 0;
		border-bottom: 1px solid #a48b78;
	}
</style>



<div class="bg_e5005a relative"style="overflow-y: scroll">
	<img src="../images/painter/rankTop.png" class="img_responsive all_width" >
	<div class="all_width all_height position_top_left_0">
		<div style="padding-left: 3.5%;padding-right: 4.4%;">
			<table class="all_width text_center line_height_20" style="background: #fff3e4;overflow-y: scroll;">
				<tr class="color_e5005a">
					<td>排名</td>
					<td>参加序号（姓名）</td>
					<td>票数</td>
				</tr>

				<tr>
					<td>
						<img src="../images/painter/rank_1.png" class="img_responsive margin_center width_25px" >
					</td>
					<td>
						1号 张家玮
					</td>
					<td>
						289
					</td>
				</tr>

				<tr>
					<td>
						<img src="../images/painter/rank_2.png" class="img_responsive margin_center width_25px" >
					</td>
					<td>
						1号 张家玮
					</td>
					<td>
						289
					</td>
				</tr>

				<tr>
					<td>
						<img src="../images/painter/rank_3.png" class="img_responsive margin_center width_25px" >
					</td>
					<td>
						1号 张家玮
					</td>
					<td>
						289
					</td>
				</tr>

				<tr>
					<td>
						<span class="display_inline_block width_35px height_35px bg_e5005a color_fff" style="border-radius: 17px;line-height: 35px;">4</span>
					</td>
					<td>
						1号 张家玮
					</td>
					<td>
						289
					</td>
				</tr>

				<tr>
					<td>
						<span class="display_inline_block width_35px height_35px bg_e5005a color_fff" style="border-radius: 17px;line-height: 35px;">4</span>
					</td>
					<td>
						1号 张家玮
					</td>
					<td>
						289
					</td>
				</tr>

				<tr>
					<td>
						<span class="display_inline_block width_35px height_35px bg_e5005a color_fff" style="border-radius: 17px;line-height: 35px;">4</span>
					</td>
					<td>
						1号 张家玮
					</td>
					<td>
						289
					</td>
				</tr>

				<tr>
					<td>
						<span class="display_inline_block width_35px height_35px bg_e5005a color_fff" style="border-radius: 17px;line-height: 35px;">4</span>
					</td>
					<td>
						1号 张家玮
					</td>
					<td>
						289
					</td>
				</tr>

				<tr>
					<td>
						<span class="display_inline_block width_35px height_35px bg_e5005a color_fff" style="border-radius: 17px;line-height: 35px;">4</span>
					</td>
					<td>
						1号 张家玮
					</td>
					<td>
						289
					</td>
				</tr>

				<tr>
					<td>
						<span class="display_inline_block width_35px height_35px bg_e5005a color_fff" style="border-radius: 17px;line-height: 35px;">44</span>
					</td>
					<td>
						1号 张家玮
					</td>
					<td>
						289
					</td>
				</tr>

				<tr>
					<td>
						<span class="display_inline_block width_35px height_35px bg_e5005a color_fff" style="border-radius: 17px;line-height: 35px;">44</span>
					</td>
					<td>
						1号 张家玮
					</td>
					<td>
						289
					</td>
				</tr>


				<tr>
					<td>
						<span class="display_inline_block width_35px height_35px bg_e5005a color_fff" style="border-radius: 17px;line-height: 35px;">44</span>
					</td>
					<td>
						1号 张家玮
					</td>
					<td>
						289
					</td>
				</tr>


				<tr>
					<td>
						<span class="display_inline_block width_35px height_35px bg_e5005a color_fff" style="border-radius: 17px;line-height: 35px;">44</span>
					</td>
					<td>
						1号 张家玮
					</td>
					<td>
						289
					</td>
				</tr>


				<tr>
					<td>
						<span class="display_inline_block width_35px height_35px bg_e5005a color_fff" style="border-radius: 17px;line-height: 35px;">44</span>
					</td>
					<td>
						1号 张家玮
					</td>
					<td>
						289
					</td>
				</tr>

				<tr>
					<td>
						<span class="display_inline_block width_35px height_35px bg_e5005a color_fff" style="border-radius: 17px;line-height: 35px;">44</span>
					</td>
					<td>
						1号 张家玮
					</td>
					<td>
						289
					</td>
				</tr>

				<tr>
					<td>
						<span class="display_inline_block width_35px height_35px bg_e5005a color_fff" style="border-radius: 17px;line-height: 35px;">444</span>
					</td>
					<td>
						1号 张家玮
					</td>
					<td>
						289
					</td>
				</tr>
			</table>
		</div>

	</div>
</div>




<div class="fixed position_bottom_left_0 all_width bg_ff">
	<img src="../images/painter/rankBottom.jpg" class="img_responsive all_width" >
	<div class="margin_top_10 padding_bottom_15 ">
		<div class="text_center line_height_25px font_12">
			<span class="margin_left_2">主办:社区惠 </span>
			<span class="margin_left_2">承办:德盛欢乐广场</span>
			<span class="margin_left_2">协办单位:中国平安 玛琅特</span>
		</div>
		<div class="text_center">
			<img src="../images/painter/shequhui_logo_03.png" class="display_inline_block img_responsive width_30px">
			<img src="../images/painter/desheng_logo_03.png" class="display_inline_block img_responsive width_30px">
			<img src="../images/painter/pingan_logo_03.png" class="display_inline_block img_responsive  width_30px">
			<img src="../images/painter/malangte_logo_03.png" class="display_inline_block img_responsive width_30px">
		</div>
	</div>
</div>
<div style="height: 80px;"></div>

<script type="text/javascript" src="../public/js/jquery.min.js"></script>
<script type="text/javascript" src="../public/js/hb_common.js"></script>
<script type="text/javascript" src="../public/js/swiper.min.js"></script>
<script type="text/javascript">
	/**
	 * 监听滚动条到底部发送请求
	 */
	function scrollLoad(userSetting){
		var that = this;
		//作为发送ajax的标记，true表示可以发送ajax，false表示不允许
		this.ajaxFlag = true;
		//如果用户没有传递参数，则使用默认参数
		var userSetting = userSetting || {};

		var defaultSetting = {
			//滚动条距离200px就触发逻辑事件
			threshold:100,
			//监听的滚动条，默认是window的
			targetWidget:"window",
			//ajax的配置文件
			ajaxSetting:{
				url: "http://www.sqhzg.cn/house/templates/secondHouse/secondHouseList.html",
				async: true,
				type:"GET",
				data:"page=1&name=3",
				success: function(res,scrollLoadObj){
					//表示不再发送请求
					scrollLoadObj.ajaxFlag = false;
				},
				error:function(res,scrollLoadObj){
					console.log(res);
				}
			},
			//滚动条滚动事件
			scrollFunc : function () {
				var scrollTop,scrollHeight, windowHeight;
				if(this.targetWidget == "window"){
					scrollTop = $(window).scrollTop();
					scrollHeight = $(document).height();
					windowHeight = $(window).height();
				}else{
					var obj = $(this.targetWidget).get(0);
					windowHeight = $(obj).height(); //固定不变的 528px
					scrollHeight = obj.scrollHeight; // 内容的实际高度 3201px
					scrollTop = obj.scrollTop; // 滚动条距离顶部的高度 时刻变化的，从0逐渐增大
				}
				console.log(scrollTop + "-----"+scrollHeight + "-----"+windowHeight + "-----");
				if(scrollHeight - scrollTop - windowHeight < this.threshold){
					if(that.ajaxFlag){
						//alert("开始发送请求");
						that.ajaxFlag = false;
						this.getPageData();
					}
				}
			},
			getPageData:function(){
				alert("getPageData logic");
				$.ajax({
					url: that.setting.ajaxSetting.url,
					async: that.setting.ajaxSetting.async,
					type: that.setting.ajaxSetting.type,
					data:that.setting.ajaxSetting.data,
					success: function(res){
						that.setting.ajaxSetting.success(res,that);
					},
					error:function(res){
						that.setting.ajaxSetting.error(res,that);
					}
				});
			}
		};

		//获取用户的配置文件，覆盖默认设置
		this.setting = $.extend(defaultSetting,userSetting);

		//给窗口滚动条绑定事件
		this.bindWindowScroll = function(){
			window.onscroll = function () {
				that.setting.scrollFunc();
				//检查loading图片是否显示
				if(that.ajaxFlag){
					$(".loading_gif").removeClass("display_none");
				}else{
					$(".loading_gif").addClass("display_none");
				}
			};
		};

		//给窗口滚动条绑定事件
		this.bindTargetWidgetWindowScroll = function(){
			$(that.setting.targetWidget).on("scroll",function(){
				that.setting.scrollFunc();
				//检查loading图片是否显示
				if(that.ajaxFlag){
					$(".loading_gif").removeClass("display_none");
				}else{
					$(".loading_gif").addClass("display_none");
				}
			});
		};

		//给滚动条绑定事件
		this.bindScrollFunc = function(){
			//监听全局窗口滚动条
			if(that.setting.targetWidget == "window"){
				that.bindWindowScroll();
			}else{
				that.bindTargetWidgetWindowScroll();
			}
		};

		//添加逻辑事件
		this.logicFunc = function(){
			that.setting.getPageData();
		};

		function init(){
			that.bindScrollFunc();
		}
		init();
	}




	$(function(){
//		var target = document.getElementById("rankWidget");
//		var offsetTop = target.offsetTop;
//		$("#rankWidget2").css("top",offsetTop+"px");

		//$("#rankWidget").css("height",getScreenWidth()*1.45+"px");

		//
		new scrollLoad({
//			"targetWidget":"#scrollWidget",
			ajaxSetting: {
				url: "http://www.sqhzg.cn/house/templates/secondHouse/secondHouseList.html",
				async: true,
				type: "GET",
				data: "page=1&name=3",
				success: function (res, scrollLoadObj) {
					alert(res);
					//表示不再发送请求
					scrollLoadObj.ajaxFlag = false;
				},
				error: function (res, scrollLoadObj) {
					console.log(res);
				}
			}
		});

	});

</script>
</body>
</html>